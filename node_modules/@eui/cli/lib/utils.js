const tools = require('@eui/tools/scripts/tools');
const config = require('./config');

function copyAngular(targetPath, cliConfig, overwrite = true) {
    if (cliConfig.appSubType == 'default') {
        tools.copydir(config.angularCommonsPath, targetPath, overwrite);
        tools.copydir(config.angularCommonsRootPath, targetPath, overwrite);
        tools.copydir(config.angularDefaultPath, targetPath, overwrite);
    }
    if (cliConfig.appSubType == 'extended') {
        tools.copydir(config.angularCommonsPath, targetPath + '/src/app', overwrite);
        tools.copydir(config.angularExtendedPath, targetPath, overwrite);
        tools.copydir(config.angularCommonsRootPath, targetPath, overwrite);
        tools.copydir(config.webToolsPath, targetPath, overwrite);
    }
    if (cliConfig.appOptions && cliConfig.appOptions.length !== 0) {
        cliConfig.appOptions.forEach((item) => {
            if (cliConfig.appSubType == 'default') {
                tools.copydir(config.optionsPath[item], targetPath, overwrite);
            }
            if (cliConfig.appSubType == 'extended') {
                tools.copydir(config.optionsPath[item], targetPath + '/src/app', overwrite);
            }
        })
    }
}

function getAngularPath(targetPath, appType, artifactId) {
    if (appType === 'angular') {
        return targetPath;
    }
    if (appType === 'web-maven') {
        return targetPath + '/src/main/angular';
    }
    if (appType === 'full-stack') {
        return targetPath + '/' + artifactId + '-web/src/main/angular';
    }
    if (appType === 'web-spring-boot') {
        return targetPath + '/' + artifactId + '-web/src/main/angular';
    }
    if (appType === 'html-styles') {
        return targetPath;
    }
}

module.exports.copyAngular = copyAngular;
module.exports.getAngularPath = getAngularPath;
