'use strict';

const findUp = require('find-up');
const fs = require('fs');
const DepGraph = require('dependency-graph').DepGraph;
const { listPackages } = require('./utils/packages');

const graph = new DepGraph();

listPackages().forEach((p) => {
    graph.addNode(p.name, p);
});

listPackages().forEach((p) => {
    if (p.deps) {
        p.deps.forEach((dep) => {
            if (graph.hasNode(dep)) {
                graph.addDependency(p.name, dep);
            }
        });
    }
});

module.exports = graph;
